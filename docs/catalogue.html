<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Challenges Catalogue - Cyber Restricted</title>
    <style>
        body {
            background-color: #000;
            color: #0f0;
            font-family: 'Courier New', monospace;
            text-align: center;
            padding-top: 100px;
        }
        .challenge {
            background: #222;
            border: 1px solid #0f0;
            color: #0f0;
            margin: 10px;
            padding: 10px;
            display: inline-block;
        }
        .locked {
            background-color: #444;
        }
    </style>
</head>
<body>
    <h1>üîê Challenge Catalogue</h1>
    <div id="catalogueContainer"></div>

    <script>
        async function fetchCatalogue() {
            const token = localStorage.getItem('jwt');
            const response = await fetch('/rewards', {
                method: 'GET',
                headers: {
                    'Authorization': `Bearer ${token}`,
                },
            });

            const data = await response.json();
            const unlockedRewards = data.rewards || [];

            const catalogue = [
                { name: 'Chapter 1: Basic Challenge', code: 'CH1', reward: 'Unlocked Reward 1' },
                { name: 'Chapter 2: Intermediate Challenge', code: 'CH2', reward: 'Locked' },
                { name: 'Chapter 3: Advanced Challenge', code: 'CH3', reward: 'Locked' },
                // Add all challenges here
            ];

            const catalogueContainer = document.getElementById("catalogueContainer");
            catalogue.forEach(challenge => {
                const challengeElement = document.createElement('div');
                challengeElement.classList.add('challenge');
                if (unlockedRewards.includes(challenge.code)) {
                    challengeElement.innerText = `${challenge.name} - ${challenge.reward}`;
                } else {
                    challengeElement.classList.add('locked');
                    challengeElement.innerText = `${challenge.name} - Locked`;
                }
                catalogueContainer.appendChild(challengeElement);
            });
        }

        fetchCatalogue();
    </script>
</body>
</html>
